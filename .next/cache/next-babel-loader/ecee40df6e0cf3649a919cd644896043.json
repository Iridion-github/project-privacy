{"ast":null,"code":"var _jsxFileName = \"/home/iridion/Desktop/Repos/Freelancer/project-privacy/pages/articoli/[articleId].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport styles from '../../styles/Home.module.css';\nimport { useLanguage } from '../../context/siteLanguageContext'; //context\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport { Row, Col } from 'react-bootstrap';\nimport { Header } from '../../components/layout/Header';\nimport { Navigation } from '../../components/layout/Navbar';\nimport { Breadcrumbs } from '../../components/layout/Breadcrumbs';\nimport { Footer } from '../../components/layout/Footer';\nimport { ArticleRead } from \"../../components/articles/ArticleRead\";\nimport { RelatedArticles } from \"../../components/articles/RelatedArticles\";\nimport { getRelatedArticles, getBreadcrumbsForArticles } from '../../utils/articles';\nimport { getBreadcrumbsForErrors } from '../../utils/errors';\nimport { ErrorComponent } from '../../components/layout/ErrorComponent';\n\nfunction articoli({\n  glossarywords,\n  DBarticles\n}) {\n  const siteLanguage = useLanguage(); //context\n\n  const router = useRouter();\n  const {\n    articleId\n  } = router.query;\n  const {\n    0: articles,\n    1: setArticles\n  } = useState(DBarticles);\n  console.log(\"[articleId] - articleId:\", articleId);\n  const {\n    0: openedArticle,\n    1: setOpenedArticle\n  } = useState(articleId);\n  const {\n    0: shouldRenderComponent,\n    1: setShouldRenderComponent\n  } = useState(false);\n\n  const handleOpenedArticle = id => {\n    const fullRoute = id !== null ? '/articoli/' + id : '/articoli/';\n    router.push(fullRoute);\n    setOpenedArticle(id);\n  };\n\n  let relatedArticles = shouldRenderComponent ? getRelatedArticles(articleId, articles, siteLanguage) : [];\n  useEffect(() => {\n    if (!openedArticle) {\n      if (DBarticles.map(el => el.id).includes(articleId)) {\n        setOpenedArticle(articleId);\n      }\n    }\n\n    if (!shouldRenderComponent) {\n      const foundArticle = DBarticles.map(el => el.id).includes(articleId);\n      setShouldRenderComponent(foundArticle);\n    }\n  });\n  return __jsx(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, __jsx(Header, {\n    title: siteLanguage === \"ita\" ? \"Articoli\" : \"Articles\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }), __jsx(Navigation, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }), openedArticle && shouldRenderComponent && __jsx(Breadcrumbs, {\n    breadcrumbsList: getBreadcrumbsForArticles(openedArticle, articles.find(art => art.id === openedArticle)[siteLanguage].title),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }), shouldRenderComponent === false && __jsx(Breadcrumbs, {\n    breadcrumbsList: getBreadcrumbsForErrors({\n      ita: \"Articolo inesistente\",\n      eng: \"No such article\"\n    }, \"/articoli\", siteLanguage),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }), __jsx(\"main\", {\n    className: styles.main,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, shouldRenderComponent === false && __jsx(ErrorComponent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }), __jsx(Row, {\n    className: \"w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, __jsx(Col, {\n    md: 3,\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }), openedArticle && shouldRenderComponent && __jsx(React.Fragment, null, __jsx(Col, {\n    md: 6,\n    className: \"justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 15\n    }\n  }, __jsx(ArticleRead, {\n    article: articles.find(art => art.id === openedArticle),\n    allArticles: articles,\n    setOpenedArticle: handleOpenedArticle,\n    glossarywords: glossarywords,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  })), __jsx(Col, {\n    md: 3,\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  }, __jsx(RelatedArticles, {\n    relatedArticles: relatedArticles,\n    setOpenedArticle: handleOpenedArticle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }))))), __jsx(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }));\n}\n\narticoli.getInitialProps = async context => {\n  let propsObj = {\n    DBarticles: [],\n    glossarywords: []\n  };\n\n  if (!context) {\n    console.log(\"context was undefined\"); //never printed\n  } else if (!context.req) {\n    console.log(\"location:\", location); //location.reload();\n    //location.replace(\"http://localhost:3000/articoli/0\")\n  } else {\n    //api of glossary\n    const apiUrlGlossary = \"http://\" + context.req.headers.host + \"/api/glossaryword\";\n    const resGlossaryword = await fetch(apiUrlGlossary);\n    const glossarywords = await resGlossaryword.json(); //api of all articles (for the related articles)\n\n    const apiUrlArticle = \"http://\" + context.req.headers.host + \"/api/article\";\n    const resArticle = await fetch(apiUrlArticle);\n    const DBarticles = await resArticle.json();\n    propsObj = {\n      DBarticles: DBarticles.data,\n      glossarywords: glossarywords.data\n    };\n  }\n\n  return propsObj;\n};\n\nexport default articoli;\n/* //Rimozione di getServerSideProps per deployare su Firebase\nexport async function getServerSideProps({ req }) {\n  //api of glossary\n  const apiUrlGlossary = \"http://\" + req.headers.host + \"/api/glossaryword\"\n  const resGlossaryword = await fetch(apiUrlGlossary)\n  const glossarywords = await resGlossaryword.json()\n  //api of all articles (for the related articles)\n  const apiUrlArticle = \"http://\" + req.headers.host + \"/api/article\"\n  const resArticle = await fetch(apiUrlArticle)\n  const DBarticles = await resArticle.json()\n  return { props: { DBarticles: DBarticles.data, glossarywords: glossarywords.data } }\n}\n*/","map":{"version":3,"sources":["/home/iridion/Desktop/Repos/Freelancer/project-privacy/pages/articoli/[articleId].js"],"names":["styles","useLanguage","useState","useEffect","useRouter","Row","Col","Header","Navigation","Breadcrumbs","Footer","ArticleRead","RelatedArticles","getRelatedArticles","getBreadcrumbsForArticles","getBreadcrumbsForErrors","ErrorComponent","articoli","glossarywords","DBarticles","siteLanguage","router","articleId","query","articles","setArticles","console","log","openedArticle","setOpenedArticle","shouldRenderComponent","setShouldRenderComponent","handleOpenedArticle","id","fullRoute","push","relatedArticles","map","el","includes","foundArticle","container","find","art","title","ita","eng","main","getInitialProps","context","propsObj","req","location","apiUrlGlossary","headers","host","resGlossaryword","fetch","json","apiUrlArticle","resArticle","data"],"mappings":"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","sourcesContent":["import styles from '../../styles/Home.module.css'\nimport { useLanguage } from '../../context/siteLanguageContext' //context\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/router'\nimport {\n  Row,\n  Col\n} from 'react-bootstrap'\nimport { Header } from '../../components/layout/Header'\nimport { Navigation } from '../../components/layout/Navbar'\nimport { Breadcrumbs } from '../../components/layout/Breadcrumbs'\nimport { Footer } from '../../components/layout/Footer'\nimport { ArticleRead } from \"../../components/articles/ArticleRead\"\nimport { RelatedArticles } from \"../../components/articles/RelatedArticles\"\nimport { getRelatedArticles, getBreadcrumbsForArticles } from '../../utils/articles'\nimport { getBreadcrumbsForErrors } from '../../utils/errors'\nimport { ErrorComponent } from '../../components/layout/ErrorComponent'\n\nfunction articoli({ glossarywords, DBarticles }) {\n  const siteLanguage = useLanguage() //context\n  const router = useRouter()\n  const { articleId } = router.query\n  const [articles, setArticles] = useState(DBarticles)\n  console.log(\"[articleId] - articleId:\", articleId)\n  const [openedArticle, setOpenedArticle] = useState(articleId)\n  const [shouldRenderComponent, setShouldRenderComponent] = useState(false)\n\n  const handleOpenedArticle = (id) => {\n    const fullRoute = id !== null ? '/articoli/' + id : '/articoli/'\n    router.push(fullRoute)\n    setOpenedArticle(id)\n  }\n\n  let relatedArticles = shouldRenderComponent ? getRelatedArticles(articleId, articles, siteLanguage) : []\n\n  useEffect(() => {\n    if (!openedArticle) {\n      if (DBarticles.map(el => el.id).includes(articleId)) {\n        setOpenedArticle(articleId)\n      }\n    }\n    if (!shouldRenderComponent) {\n      const foundArticle = DBarticles.map(el => el.id).includes(articleId)\n      setShouldRenderComponent(foundArticle)\n    }\n  })\n\n  return (\n    <div className={styles.container}>\n      <Header\n        title={siteLanguage === \"ita\" ? \"Articoli\" : \"Articles\"}\n      />\n      {/* Navbar */}\n      <Navigation />\n      {(openedArticle && shouldRenderComponent) &&\n        <Breadcrumbs\n          breadcrumbsList={getBreadcrumbsForArticles(openedArticle, articles.find(art => art.id === openedArticle)[siteLanguage].title)}\n        />\n      }\n      {shouldRenderComponent === false &&\n        <Breadcrumbs\n          breadcrumbsList={getBreadcrumbsForErrors({ ita: \"Articolo inesistente\", eng: \"No such article\" }, \"/articoli\", siteLanguage)}\n        />\n      }\n      {/* Page Content */}\n      <main className={styles.main}>\n        {shouldRenderComponent === false &&\n          <ErrorComponent />\n        }\n        <Row className=\"w-100\">\n          <Col md={3} className=\"\">\n          </Col>\n          {(openedArticle && shouldRenderComponent) &&\n            <>\n              <Col md={6} className=\"justify-content-center\">\n                <ArticleRead\n                  article={articles.find(art => art.id === openedArticle)}\n                  allArticles={articles}\n                  setOpenedArticle={handleOpenedArticle}\n                  glossarywords={glossarywords}\n                />\n              </Col>\n              <Col md={3} className=\"\">\n                <RelatedArticles\n                  relatedArticles={relatedArticles}\n                  setOpenedArticle={handleOpenedArticle}\n                />\n              </Col>\n            </>\n          }\n        </Row>\n      </main>\n      {/* Footer */}\n      <Footer />\n    </div>\n  )\n}\n\narticoli.getInitialProps = async (context) => {\n  let propsObj = { DBarticles: [], glossarywords: [] }\n  if (!context) {\n    console.log(\"context was undefined\") //never printed\n  } else if (!context.req) {\n    console.log(\"location:\", location)\n    //location.reload();\n    //location.replace(\"http://localhost:3000/articoli/0\")\n  } else {\n    //api of glossary\n    const apiUrlGlossary = \"http://\" + context.req.headers.host + \"/api/glossaryword\"\n    const resGlossaryword = await fetch(apiUrlGlossary)\n    const glossarywords = await resGlossaryword.json()\n    //api of all articles (for the related articles)\n    const apiUrlArticle = \"http://\" + context.req.headers.host + \"/api/article\"\n    const resArticle = await fetch(apiUrlArticle)\n    const DBarticles = await resArticle.json()\n    propsObj = { DBarticles: DBarticles.data, glossarywords: glossarywords.data }\n  }\n  return propsObj\n}\n\nexport default articoli\n\n/* //Rimozione di getServerSideProps per deployare su Firebase\nexport async function getServerSideProps({ req }) {\n  //api of glossary\n  const apiUrlGlossary = \"http://\" + req.headers.host + \"/api/glossaryword\"\n  const resGlossaryword = await fetch(apiUrlGlossary)\n  const glossarywords = await resGlossaryword.json()\n  //api of all articles (for the related articles)\n  const apiUrlArticle = \"http://\" + req.headers.host + \"/api/article\"\n  const resArticle = await fetch(apiUrlArticle)\n  const DBarticles = await resArticle.json()\n  return { props: { DBarticles: DBarticles.data, glossarywords: glossarywords.data } }\n}\n*/"]},"metadata":{},"sourceType":"module"}